<!DOCTYPE html>
<html lang="en">
<html>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <html>
    <head>
        <meta charset="UTF-8"/>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    </head>

<body>

<nav class="navbar navbar-expand-lg navbar-light bg-info">
    <a class="navbar-brand text-white" href="/home">Home</a>
    <div class="collapse navbar-collapse" id="Menu">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link text-white" href="/messages">Messages</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-white" href="/create">Create Message</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-white" href="/newTopic">Create Topic</a>
            </li>
        </ul>
    </div>
    <form data-th-action="@{/logout}" method="POST">
        <input type="submit" value="Logout"/>
    </form>
</nav>

<p></p>
<div class="container">
    <h2>Üzenetek</h2>
    <form data-th-action="@{/messages}" method="get">
        <label class=" form-check-inline ">Üzenetek száma:</label>
        <input type="number" name="limit" class="form-check-inline " id="limit"/>


        <label class="form-check-inline" for="sortBy">Rendezés: </label>
        <select style="margin:5px;" class="form-check-inline" name="sortBy" id="sortBy">
            <option name="dateTime" value="dateTime">Beérkezési idő</option>
            <option name="author" value="author">Feladó</option>
            <option name="id" value="id">Azonosító</option>
        </select>

        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="order" id="true" value="true"
                   checked>
            <label class="form-check-label col-form-label-sm" for="true">Növekvő</label>
        </div>

        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="order" id="false" value="false"
                   checked>
            <label class="form-check-label col-form-label-sm" for="false">Csökkenő</label>
        </div>
        <button style="margin:40px;" type="submit" class="btn btn-primary btn-right ">Szűrés</button>
    </form>
</div>


<div class="card-body">
    <table data-th-if="${!messageList.empty}" class="table table-striped table-bordered">
        <thead>
        <tr>
            <td>Id</td>
            <td>Feladó</td>
            <td>Üzenet</td>
            <td>Dátum</td>
            <td>Topic</td>
            <td data-sec-authorize="hasRole('ADMIN')">Deleted</td>
            <td data-sec-authorize="hasRole('ADMIN')"></td>
        </tr>
        </thead>

        <tr data-th-each="message: ${messageList}">
            <td data-th-text="${message.id}"></td>
            <td data-th-text="${message.author}"></td>
            <td data-th-text="${{message.text}}"></td>
            <td data-th-text="${{message.dateTime}}"></td>
            <td data-th-text="${message.messageTopic.topicName}"></td>

            <td data-sec-authorize="hasRole('ADMIN')" data-th-text="${message.deleted}"></td>
            <td data-sec-authorize="hasRole('ADMIN')">
                <form data-th-action="@{'/messages/delete/'+${message.id}}" method="post"><input type="submit" value="Delete"/>
                </form>
            </td>
            <td><a data-th-href="@{/message/{id}(id=${message.id})}">Részletek</a></td>
        </tr>
    </table>
</div>
</body>
</html>